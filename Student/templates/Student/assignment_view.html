{% extends 'Student/base.html' %}
{% load static %}

{% block title %}{{ assignment.title }} - Assignment{% endblock %}

{% block content %}

<!-- Outer Container -->
<div class="max-w-5xl mx-auto animate-fadeIn">

    <!-- Back Button -->
    <a href="{% url 'Sdashboard' %}" 
       class="inline-flex items-center text-gm-primary hover:text-indigo-600 font-medium mb-8 transition-all duration-300 group">
        <svg class="w-5 h-5 mr-2 transform group-hover:-translate-x-1 transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
        Back to Dashboard
    </a>

    <!-- Assignment Card -->
    <div class="bg-white/60 backdrop-blur-2xl border border-white/40 shadow-2xl rounded-3xl p-10 transition-all duration-300 hover:shadow-[0_0_50px_rgba(99,102,241,0.3)]">

        <!-- Header -->
        <div class="pb-6 border-b border-gray-300/60">
            <h2 class="text-4xl font-extrabold text-gray-900 tracking-tight">{{ assignment.title }}</h2>

            <div class="mt-4 flex flex-wrap gap-6 text-sm text-gray-700">
                <span class="flex items-center gap-1 font-medium">
                    ‚è≥ <span class="text-red-600 font-bold">{{ assignment.due_date|date:"F d, Y, P" }}</span>
                </span>

                <span class="flex items-center gap-1 font-medium">
                    üìù <span class="text-gray-900 font-bold">{{ assignment.max_score }} pts</span>
                </span>

                <span class="flex items-center gap-1 font-medium">
                    üìö <span class="text-gray-900 font-bold">{{ assignment.subject }}</span>
                </span>
            </div>
        </div>

        <!-- Instructions -->
        <div class="mt-10">
            <h3 class="text-2xl font-bold text-gray-900 mb-3 flex items-center gap-2">
                <span class="inline-block w-2 h-2 bg-gm-primary rounded-full"></span>
                Instructions
            </h3>
            <div class="prose max-w-none text-gray-800 bg-gray-100 p-6 rounded-xl border border-gray-200 animate-slideUp">
                {{ assignment.description|linebreaks }}
            </div>
        </div>

        <!-- Rubric -->
        {% if assignment.answer_key %}
        <div class="mt-10">
            <h3 class="text-2xl font-bold text-gray-900 mb-3 flex items-center gap-2">
                <span class="inline-block w-2 h-2 bg-indigo-500 rounded-full"></span>
                Rubric / Guidelines
            </h3>
            <div class="prose max-w-none text-gray-800 bg-indigo-50 p-6 rounded-xl border border-indigo-200 animate-slideUpDelay">
                {{ assignment.answer_key|linebreaks }}
            </div>
        </div>
        {% endif %}

        <!-- Submission Section -->
        <div class="mt-12 border-t border-gray-300/60 pt-10">
            <h3 class="text-3xl font-extrabold text-gray-900 mb-6 tracking-tight">Submit Your Work</h3>

            <form method="post" enctype="multipart/form-data" class="space-y-8">
                {% csrf_token %}

                <!-- Text Area -->
                <div class="animate-fadeInSlow">
                    <label for="text_submission" class="block text-sm font-semibold text-gray-800 mb-1">
                        Write Your Answer
                    </label>
                    <textarea id="text_submission" name="text_submission" rows="8"
                        class="w-full p-4 border border-gray-300 rounded-2xl bg-white text-gray-900 shadow-sm
                               focus:ring-4 focus:ring-gm-primary/40 focus:border-gm-primary transition-all resize-none"
                        placeholder="Type your response..."></textarea>
                </div>

                <!-- File Upload -->
                <div class="animate-fadeInSlow">
                    <label class="block text-sm font-semibold text-gray-800 mb-1">
                        Or Upload a File
                    </label>

                    <input type="file" id="file_submission" name="file_submission"
                        class="block w-full text-sm text-gray-700
                               file:py-3 file:px-6 file:rounded-xl file:border-0
                               file:bg-indigo-100 file:text-indigo-700 shadow-sm
                               hover:file:bg-indigo-200 transition cursor-pointer">
                </div>

                <!-- Submit Button -->
                <div class="text-right animate-fadeInSlow">
                    <button type="submit"
                        class="px-10 py-3 bg-gm-primary hover:bg-indigo-600 text-white font-semibold rounded-2xl shadow-lg
                               transition transform hover:scale-[1.05] active:scale-[0.97] duration-300">
                        Submit Assignment
                    </button>
                </div>
            </form>

        </div>
    </div>
</div>

<!-- Animations -->
<style>
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
}
@keyframes slideUp {
    from { opacity: 0; transform: translateY(15px); }
    to   { opacity: 1; transform: translateY(0); }
}
@keyframes slideUpDelay {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
}
.animate-fadeIn { animation: fadeIn 0.6s ease-out; }
.animate-fadeInSlow { animation: fadeIn 1s ease-out; }
.animate-slideUp { animation: slideUp 0.7s ease-out; }
.animate-slideUpDelay { animation: slideUp 1s ease-out; }
</style>

{% endblock %}
